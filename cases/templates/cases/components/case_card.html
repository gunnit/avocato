<!--begin::Case Card-->
<div class="col-md-6 mb-4">
    <div class="card card-flush h-xl-100 shadow-sm hover-elevate-up">
        <!--begin::Card header-->
        <div class="card-header ribbon ribbon-end">
            {% if caso.stato == 'In corso' %}
                <div class="ribbon-label bg-primary">
                    {{ caso.stato }}
                    <span class="ribbon-inner bg-primary-light"></span>
                </div>
            {% elif caso.stato == 'Completato' %}
                <div class="ribbon-label bg-success">
                    {{ caso.stato }}
                    <span class="ribbon-inner bg-success-light"></span>
                </div>
            {% else %}
                <div class="ribbon-label bg-warning">
                    {{ caso.stato }}
                    <span class="ribbon-inner bg-warning-light"></span>
                </div>
            {% endif %}
        </div>
        <!--end::Card header-->

        <!--begin::Card body-->
        <div class="card-body py-5">
            <div class="d-flex flex-stack mb-3">
                <!--begin::Info-->
                <div class="d-flex align-items-center flex-row-fluid flex-wrap">
                    <div class="flex-grow-1 me-2">
                        <a href="{% url 'dettaglio_caso' caso.id %}" class="text-gray-800 text-hover-primary fs-2 fw-bolder mb-1 text-truncate d-block">{{ caso.titolo }}</a>
                        <div class="d-flex align-items-center text-gray-500 gap-2 mt-1">
                            <i class="ki-duotone ki-calendar-8 fs-6">
                                <span class="path1"></span>
                                <span class="path2"></span>
                            </i>
                            <span class="fw-semibold">{{ caso.data_creazione|date:"d F Y - H:i" }}</span>
                        </div>
                    </div>
                </div>
                <!--end::Info-->
            </div>

            <div class="separator separator-dashed my-5"></div>

            <div class="text-gray-600 fw-semibold mb-5 line-clamp-3">{{ caso.descrizione|truncatewords:30 }}</div>

            <!--begin::Stats-->
            <div class="d-flex flex-wrap flex-stack mb-5">
                <!--begin::Stat-->
                <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-3 mb-3">
                    <!--begin::Number-->
                    <div class="d-flex align-items-center">
                        <i class="ki-duotone ki-document fs-3 text-primary me-2">
                            <span class="path1"></span>
                            <span class="path2"></span>
                        </i>
                        <div class="fs-4 fw-bold">{{ caso.documenti_count }}</div>
                    </div>
                    <!--end::Number-->
                    <!--begin::Label-->
                    <div class="fw-semibold fs-7 text-gray-500">Documenti</div>
                    <!--end::Label-->
                </div>
                <!--end::Stat-->
                <!--begin::Stat-->
                <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-3 mb-3">
                    <!--begin::Number-->
                    <div class="d-flex align-items-center">
                        <i class="ki-duotone ki-message-text-2 fs-3 text-danger me-2">
                            <span class="path1"></span>
                            <span class="path2"></span>
                        </i>
                        <div class="fs-4 fw-bold">{{ caso.messaggi_count }}</div>
                    </div>
                    <!--end::Number-->
                    <!--begin::Label-->
                    <div class="fw-semibold fs-7 text-gray-500">Messaggi</div>
                    <!--end::Label-->
                </div>
                <!--end::Stat-->
            </div>
            <!--end::Stats-->

            <div class="d-flex flex-stack">
                <span class="text-gray-400 fw-semibold fs-7">
                    <i class="ki-duotone ki-abstract-26 fs-7 me-1">
                        <span class="path1"></span>
                        <span class="path2"></span>
                    </i>ID: {{ caso.id }}
                </span>
                <div class="d-flex gap-2">
                    <a href="{% url 'dettaglio_caso' caso.id %}" class="btn btn-sm btn-primary" data-bs-toggle="tooltip" data-bs-custom-class="tooltip-inverse" data-bs-placement="top" title="Visualizza dettagli del caso">
                        <i class="ki-duotone ki-eye fs-7 me-1">
                            <span class="path1"></span>
                            <span class="path2"></span>
                            <span class="path3"></span>
                        </i>Dettagli
                    </a>
                </div>
            </div>
        </div>
        <!--end::Card body-->
    </div>
</div>
<!--end::Case Card-->
